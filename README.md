## Домашнее задание к лекции 7. «Подготовка к собеседованию» — README

Этот репозиторий содержит решения трёх заданий:

- **Задача 1**: реализация стека (`Task_1.py`)
- **Задача 2**: проверка сбалансированности скобок (`Task_2.py`)
- **Задача 3**: рефакторинг почтового скрипта в класс по PEP8 (`Task_3.py`)


## Подготовка окружения

Рекомендуется использовать виртуальное окружение Python.

1) Создать и активировать окружение (macOS/Linux):

```bash
python3 -m venv .venv
source .venv/bin/activate
```

2) Проверить версию Python:

```bash
python --version
```

Зависимостей, требующих установки через `pip`, нет.


## Структура репозитория

- `Task_1.py` — решение задачи 1 (класс `Stack`)
- `Task_2.py` — решение задачи 2 (проверка скобок; импортирует `Stack` из `Task_1`)
- `Task_3.py` — решение задачи 3 (класс `GmailClient` + конфигурация `GmailConfig`)
- `TASKS.md` — формулировки заданий
- `PEP8.md` — исходное описание кода для рефакторинга
- `.gitignore` — игнорируемые файлы (включая `.venv`)


## Задача 1 — Стек (LIFO)

Файл: `Task_1.py`

- Реализован обобщённый класс `Stack` с методами:
  - `is_empty()` — проверка пустоты стека
  - `push(item)` — добавление элемента на вершину
  - `pop()` — снятие и возврат верхнего элемента
  - `peek()` — просмотр верхнего элемента без удаления
  - `size()` — количество элементов
- Весь код и сообщения на русском языке; стиль соответствует PEP8.

Запуск демонстрации (необязательно):

```bash
python Task_1.py
```

При успешной работе будет выведено сообщение о корректности операций стека.


## Задача 2 — Проверка сбалансированности скобок

Файл: `Task_2.py`

- Используется стек из задачи 1 (`from Task_1 import Stack`).
- Поддерживаются круглые, квадратные и фигурные скобки: `()`, `[]`, `{}`.
- Все не-скобочные символы игнорируются для устойчивости функции.
- Чтение строки со стандартного ввода и вывод результата:
  - «Сбалансированно»
  - «Несбалансированно»

Запуск с примерами:

```bash
echo '(((([{}]))))' | python Task_2.py
# Сбалансированно

echo '{{[(])]}}' | python Task_2.py
# Несбалансированно
```

Вы также можете импортировать функцию `is_balanced` из `Task_2.py` в своих скриптах.


## Задача 3 — Рефакторинг почтового скрипта в класс (PEP8)

Файл: `Task_3.py`

### Цели рефакторинга

- **Создать класс** для работы с почтой (`GmailClient`).
- **Разделить ответственность**: отдельные методы для отправки и получения писем.
- **Убрать хардкод**: все значения передаются через конфигурацию или параметры.
- **PEP8**: имена переменных и стиль кода приведены к стандарту.
- **Безопасная инициализация**: под `if __name__ == "__main__"` чтение логина/пароля из переменных окружения.

### Архитектура решения

- `GmailConfig` (dataclass):
  - `username`, `password` — обязательные поля
  - `smtp_host` (по умолчанию `smtp.gmail.com`)
  - `imap_host` (по умолчанию `imap.gmail.com`)
  - `smtp_port` (по умолчанию `587`)

- `GmailClient`:
  - `send_email(subject: str, message: str, recipients: Iterable[str]) -> None` — отправка письма через SMTP с TLS и авторизацией.
  - `fetch_latest_by_header(header_value: Optional[str]) -> Tuple[bytes, email.message.Message]` — получение последнего письма по `Subject` через IMAP (возвращает сырые байты письма и распарсенный объект).

### Инициализация и запуск

1) Установить переменные окружения (macOS/Linux):

```bash
export GMAIL_USERNAME="your_login@gmail.com"
export GMAIL_PASSWORD="your_password"
```

2) Запустить модуль для проверки инициализации:

```bash
python Task_3.py
```

Ожидаемое поведение: модуль сообщит об успешной инициализации клиента, если переменные окружения заданы.

3) Пример программного использования (в собственном скрипте):

```python
from Task_3 import GmailClient, GmailConfig

config = GmailConfig(username="your_login@gmail.com", password="your_password")
client = GmailClient(config)

# Отправка письма
client.send_email(
    subject="Тема",
    message="Текст письма",
    recipients=["recipient@example.com"],
)

# Получение последнего письма по заголовку Subject
raw_bytes, parsed = client.fetch_latest_by_header(header_value="Тема")
print(parsed["Subject"])
```

Обратите внимание: для реального использования могут потребоваться настройки безопасности аккаунта Google (пароли приложений/доступ IMAP/SMTP и т. п.). В репозитории намеренно отсутствуют реальные креденшлы.